
server_private_key = '-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAzGp69YJK5LjvG2oAJiwaha55Lr6G9RpQYEiXZvBS3GzXYUUs\n4ThAvVymrIS5J5RGqWJjyduW3i2PfRBrT8h/H43Vy0rjs1rnCjU8ORc0Z+gKmiFD\nyi3wqEBgjPR8sx66/jHRY6cAraA0ngyAp5KNMAqeIfD7LvzVM9sakqxO0QIAdxPr\nCzlcUxx1tjxtOJ5hheOVTzhDBcsJWT9PscNilP8w9EaSeg4+ZGRRlcFNx9EBe6M+\nOv7mbuKoigfnXKgza+GXeJOYIGfdhh9XiFgdmfI59VPOxsaDzywlAL12eWZczaK2\nlC5cyk6IKg2zoWrPf13MtIG1iREKaxmOJbVpJwIDAQABAoIBAF3sDtL/KqoszrAp\n5Cel3AnQQJ3ZrOixTnzu3aHOikP9PnjS7+wLjLN0/qAF24zz9AOf0XnOC2PKS0OL\nZ8MgvEgjQzhFEJo4CjAGhcU1hD65vyVSY3Nh6FFmQvaA30rts71X5n2DHiyoj4SO\n+g4EqBqKxl2R+9d7E/rfkTYTNaOSFT3ncxdIZ7VtPGCFtkTpgVfG36bL6xFJg5v4\nxfAkZfRBbwixtB25QrnoBGk5DR9GB7gl2VoDtchE5kKfqlBBv1TpT3fxwSi+Jh4K\nHOWaHJmBYcX1xkq5tyYTWTLaG1lkmtKH+6NzeBI4iwt41tH5ru/bTzszgIXzR5db\nNPg5twECgYEA1oNgdPqBhx7D1wdTpylmhyQKpFuSwSJNCEMFN+MHpkAyz6cYvVn7\nxnfgJzZ6YIs9QHOMC8nci4GU3lxC03Dj/wW54jDJxig+FYR780IQS0HKmsrNQe0v\neOcOtZAMxZ2braF7hD66TDMouzTRVK4fT8BIB2BntDK3aNv3rccXh0MCgYEA8/Mv\nXzlKv7sa/CbdsqdL7oDKmGtAJwwf+BAAIUDoKge+v+Od8dTfUax+MdfRNfCDGXaz\nNJ6XeZEfsIrCypqXulParjJJMt3Ht3GV1QrHH3CoEejC12M/bR5vmdPTHt+Z0LXJ\nfZg/3nwSx8E9ti/SbbW/idR8hidjlPRPv47qvk0CgYBvLfJdTsS5coGQPjTmK7f/\nDPgTDX83aH7CbHIU8C8zxIxRQcq5wRyUVecwi7TLuv8JG5oXNg1/pK6yvODJ0/Xn\nZGFeUWkSsiLTZjIT90aYqsXGipvtsm/rWt4tzjZAahqY2Fw7Q4OtIMrYlFx2ZjTG\nUeNDJ304URzsVS2+vLR+HwKBgBboPQiKDrTWUwBefe7quryYp22MlKeWAeJ/TiPR\nPnvD4muOaiRtQtMeiXMQuvp/rS/U75r/UWX+9KTVQtlXjuvWN/CnlCwMm1ZkehdZ\nPb18DKwx2Sn0jd4nP3+IXojFomHw0AzVIRo5OGI9iRf0gaP/rw64P0Exra4tCtgI\nCY75AoGBAIYq+0GmI3g2O/k2k4aMrs4sHklg8TaTGvkS5iXxzGbW6sge3RxSlqHl\nF0l0Oqa30zQ8ddsCuHsAPH2oeDVgC7amFNe+80dECkTZPBSuG5CEz7PPWJdDKw2d\nBS49ZBaHhfg4gKBy0Bc+/OT2jV1iff2M8PN6DR2Sl8Q79gS3e8Go\n-----END RSA PRIVATE KEY-----'
server_public_key = '-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzGp69YJK5LjvG2oAJiwa\nha55Lr6G9RpQYEiXZvBS3GzXYUUs4ThAvVymrIS5J5RGqWJjyduW3i2PfRBrT8h/\nH43Vy0rjs1rnCjU8ORc0Z+gKmiFDyi3wqEBgjPR8sx66/jHRY6cAraA0ngyAp5KN\nMAqeIfD7LvzVM9sakqxO0QIAdxPrCzlcUxx1tjxtOJ5hheOVTzhDBcsJWT9PscNi\nlP8w9EaSeg4+ZGRRlcFNx9EBe6M+Ov7mbuKoigfnXKgza+GXeJOYIGfdhh9XiFgd\nmfI59VPOxsaDzywlAL12eWZczaK2lC5cyk6IKg2zoWrPf13MtIG1iREKaxmOJbVp\nJwIDAQAB\n-----END PUBLIC KEY-----'
client_public_key = '-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzsH1AvD7mvqit5YvbAek\nHNmGIgsTNVaJpl5JCMb0RjCdKELdg49BNC1Ct2v90OYpaChyEEJzf/gUT1WgNsfI\nK1MV05JlLTOR4uObqTXKlXv6zVsNKsoPf64k+Apfq+ZuH7VpBTgTGFgzNDEqrow0\nr9yMCAbNrT8jH1NuG3GWhYBLcOyjj9tfj2BA89LywHHAjqk2bmtxj2oXBHaEZeo7\nxKzDZ8DtMzWA9yH0RnNnx84KmH6nLaGkc2pOjQ/d0Hw1AN8DlS5EtFB86Z6YbXr7\nptHuSNSTkzKZOSuKCZi3DSlY9+CFveN5YV9cInf+E5pdSH4/njOJCkNAsxtKUPCK\nyQIDAQAB\n-----END PUBLIC KEY-----'

import socket 
import sys
from crypto import encrypt_RSA, decrypt_RSA

# create dgram udp socket
try:
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
except socket.error:
    print 'Failed to create socket'
    sys.exit()

host = 'localhost';
port = 8888;

while(1) :
    msg = raw_input('Enter message to send : ')
    #msg = encrypt_RSA(server_private_key, msg)
    msg = encrypt_RSA(client_public_key, msg)
    try :
        #Set the whole string
        s.sendto(msg, (host, port))
        
        # receive data from client (data, addr)
        d = s.recvfrom(1024)
        reply = d[0]
        addr = d[1]
        
        reply = decrypt_RSA(server_private_key, reply)
        #reply = decrypt_RSA(client_public_key, reply)
        
        print 'Server reply : ' + reply
    
    except socket.error, msg:
        print 'Error Code : ' + str(msg[0]) + ' Message ' + msg[1]
        sys.exit()
